<!DOCTYPE html>
<html>
<head>
    <title>신규 장비 등록</title>
    <style>
        .spec-row { display: flex; align-items: center; margin-bottom: 10px; }
        .spec-row select, .spec-row input { margin-right: 10px; }
        .spec-row button { cursor: pointer; }
    </style>
</head>
<body>
    <form method="POST" enctype="multipart/form-data">
        <label>제품명:</label> <input type="text" name="name"><br>
        <label>제조사:</label> <input type="text" name="manufacturer"><br>
        <label>카테고리:</label> <select name="category">
            <option>보안</option>
            <option>네트워크</option>
            <option>서버</option>
        </select><br>
        <label>업로드 날짜:</label> <input type="date" name="upload_date"><br>
        <label>사진:</label> <input type="file" name="image"><br>
        <h3>기술 스펙</h3>
        <div id="spec-container">
        </div>
        <button type="button" onclick="addSpecRow()">스펙 추가</button><br><br>
        <button type="submit">등록</button>
    </form>
    <br>
    <button onclick="window.location.href='/admin'">관리자 페이지로 돌아가기</button>
    <script>
        const specItems = {{ spec_items | tojson }};
        function addSpecRow() {
            const container = document.getElementById('spec-container');
            const row = document.createElement('div');
            row.className = 'spec-row';
            row.innerHTML = `
                <select name="spec_name[]">
                    ${specItems.map(item => `<option value="${item}">${item}</option>`).join('')}
                </select>
                <input type="text" name="spec_value[]" placeholder="값 입력">
                <button type="button" onclick="this.parentElement.remove()">X</button>
            `;
            container.appendChild(row);
        }
        window.onload = () => addSpecRow();
    </script>
</body>
</html>